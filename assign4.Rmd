---
title: "assign4"
output: html_notebook
---

```{r}
library(lubridate)
library(glue)
library(stringr)
library(tidyverse)
library(RVerbalExpressions)
```

For the regular expression exercises, try writing first using regular expressions directly, then try using rverbalexpressions. Provide the code for both. 

# Part 1

## R4DS 16.4.5

Create a vector of dates giving the first day of every month in the current year. 

```{r}
firstomonth <- seq(as.Date("2019/1/1"), by = "month", length.out = 12)
firstomonth
```


Write a function that given your birthday (as a date), returns how old you are in years.

```{r}
myage <- function(bday){
  age <- length(seq(from = as.Date(bday), to = Sys.Date(), by = "year"))-1
  glue("You are {age} years old")
}

myage("1991/04/06")
```

Write a function that given your birthday, returns the day of the week you were born on. 

```{r}

birthwday <- function(bday){
 bdate <- as.character(wday(as.Date(bday),label = TRUE, abbr = FALSE))
 glue("You were born on a {bdate}")
}  

birthwday("1991/04/06")
```

## R4DS 14.3.2.1

Given the corpus of common words in stringr::words, create regular expressions that find all words that have seven letters or more. (Since this list is long, you might want to use the match argument to str_view() to show only the matching or non-matching words.)


```{r}
words <- stringr::words

str_view(words,"\\w{7,}\\b",match = TRUE)
```


```{r}

sevenplus <- rx() %>%
  rx_alpha() %>%
  rx_multiple(min = 7)

str_view(words, sevenplus, match = TRUE)

```


## R4DS 14.3.3.1

Use str_detect to find all words that:

That only contain consonants. (Hint: thinking about matching “not”-vowels.)

```{r}
str_view(words, "^[^aeiou]+$", match = TRUE)

str_detect(words, "^[^aeiou]+$") #Not sure why you would want this output, but it's what the question asked for.
```
```{r}
novow <- rx() %>%
  rx_start_of_line() %>% 
  rx_anything_but("aeiou") %>% 
  rx_end_of_line()
  
  novow

str_view(words, novow, match = TRUE)
```


Empirically verify the rule “i before e except after c”.

```{r}
#[^c](ei)
str_view(words, "[^c]ei", match = TRUE)

```

```{r}

crul <- rx() %>% 
  rx_something_but("c") %>% 
  rx_find("ei")

str_view(words, crul, match = TRUE)
```

Create a regular expression that will match telephone numbers as commonly written in the US. Split this up into multiple expressions as needed.

```{r}

str_view("9829924999","(?:\\d{1}\\s)?\\(?(\\d{3})\\)?-?\\s?(\\d{3})-?\\s?(\\d{4})") #The internet is very helpful



```
```{r}
telrx <- rx() %>%
  rx_maybe("(") %>% 
  rx_digit() %>% 
  rx_repeat_previous(3) %>% 
  rx_maybe("),, ") %>% 
  rx_any_of("-. ") %>% 
  rx_digit() %>% 
  rx_repeat_previous(3) %>% 
  rx_any_of("-. ") %>% 
  rx_digit() %>% 
  rx_repeat_previous(4) %>% 
  print()
 # grepl(c("217-377-2867", "217.377.2867", "69-69-420", "(299) 3727877")) %>% 
  #print()

grepl(telrx, c("669-669-0420", "(669) 6690420"))
 
```


# Part 2


Choose a dataset (this can be the same dataset as the last assignment, or a new one). Define a predictive modeling problem. Create the appropriate files and notebooks to do the following:

1. Describe the data and the problem

2. Read in and check data

2. Clean up the data. 

*Note: You may request that score for these sections replace your score for the coding portion of Assignment 3.*

4. Using best practices, write four functions which add engineered features to the dataset, including a description and rationale. Include a test to determine whether the features are working as intended. 

5. Prepare the data for modeling

- Have it be ready to give it to linear regression or random forrest or whatever. They all require the data to be a data.frame, in tidy format.  Looks like the data frame you started with, but augmented with additional columns with your engineered functions.

- Import data, call feature enginnering functions, adds columns. do it a few times, then will have modeling code at the bottom. 
All we need to do is create the pipeline and return a DF with the new columns. 

Note: this will form the basis for your midterm project. Take advantage of TA's and my office hours. We can provide feedback and guidance. 


```{r}
df1 <- df %>% 
  group_by(continent) %>% 
  mutate(continent = 0) %>% 
  ungroup()
  

```

